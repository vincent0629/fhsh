(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a.p+"static/media/next.d0808652.svg"},,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/skip.9ff1744a.svg"},function(e,t,a){e.exports=a.p+"static/media/top.daa0a7fb.svg"},function(e,t,a){e.exports=a.p+"static/media/bottom.c2a0e866.svg"},function(e,t,a){e.exports=a.p+"static/media/slice_c.b50a0cb1.svg"},,,function(e,t,a){e.exports=a(48)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(15),r=a.n(o),l=a(1),c=(a(35),a(20)),s=a(9),m=a(10),u=a(14),d=a(12),p=a(11),h=(a(36),a(51)),E=a(50);a(37);var v=function(e){return i.a.createElement("div",{className:["dialog__container",e.position?e.position:""].join(" "),style:{backgroundImage:"url(./logo192.png)"}},i.a.createElement("div",{className:"dialog__div"},e.children))},f=(a(38),a(39),a(13)),g=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(s.a)(this,a),n=t.call(this);var i=e.time-new Date;return n.state={d:Math.floor(i/60/60/24/1e3),h:Math.floor(i/1e3/60/60%24),m:Math.floor(i/1e3/60%60),s:Math.floor(i/1e3%60),start:i<0},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.playAudio("BGM"),this.interval=window.setInterval((function(){var t=e.props.time-new Date;e.setState({d:Math.floor(t/60/60/24/1e3),h:Math.floor(t/1e3/60/60%24),m:Math.floor(t/1e3/60%60),s:Math.floor(t/1e3%60),start:t<0}),t<0&&window.clearInterval(e.interval)}),1e3)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state,t=e.d,a=e.h,n=e.m,o=e.s,r=e.start,l=this.props.initialScene;return i.a.createElement("div",{className:"countdown__container"},!r&&i.a.createElement("div",{className:"countdown__layout"},i.a.createElement("h3",null,"\u6d3b\u52d5\u5012\u6578"),i.a.createElement("div",{className:"countdown__timer"},i.a.createElement("span",{className:"countdown__field"},t),"\u5929",i.a.createElement("span",{className:"countdown__field"},a),"\u6642",i.a.createElement("span",{className:"countdown__field"},n),"\u5206",i.a.createElement("span",{className:"countdown__field"},o),"\u79d2")),r&&i.a.createElement("div",{className:"countdown__layout"},i.a.createElement(f.a,{to:"/start/"+l},"\u6e96\u5099\u555f\u7a0b\u51fa\u767c")))}}]),a}(i.a.Component),w=a(28),A=(a(45),a(7)),b=a.n(A),_=a(24),y=a.n(_),N=a(25),k=a.n(N),T=a(26),x=a.n(T);var S=function(){var e=Object(n.useState)(1),t=Object(w.a)(e,2),a=t[0],o=t[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{display:10!==a?"flex":"none"},className:"tutorial__container"},1===a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"tutorial__content"},i.a.createElement("h1",null,"\u6b61\u8fce\u4f86\u5230",i.a.createElement("br",null),"\u5b89\u5fc3\u57ce\u5e02!"),i.a.createElement("h2",null,"\u9ad4\u9a57\u65c5\u7a0b\u884c\u524d\u8aaa\u660e")),i.a.createElement("div",{className:"tutorial__button"},i.a.createElement("span",null,i.a.createElement("img",{src:b.a,alt:"next",onClick:function(){return o(a+1)}})))),2===a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"tutorial__content"},i.a.createElement("h2",null,"\u884c\u524d\u6ce8\u610f\u4e8b\u9805\u4e00"),i.a.createElement("p",null,"\u70ba\u4e86\u64c1\u6709\u6700\u597d\u7684\u9ad4\u9a57\u54c1\u8cea,",i.a.createElement("br",null),"\u5168\u7a0b\u4e00\u5b9a\u8981\u6234\u8033\u6a5f\u3002"),i.a.createElement("p",null,"\u95dc\u6389\u6240\u6709\u793e\u7fa4\u901a\u77e5,\u8acb\u958b\u555f\u300c\u52ff\u64fe\u6a21\u5f0f\u300d\u3002")),i.a.createElement("div",{className:"tutorial__button"},i.a.createElement("span",null,i.a.createElement("img",{src:b.a,alt:"next",onClick:function(){return o(a+1)}})))),3===a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"tutorial__content"},i.a.createElement("h2",null,"\u884c\u524d\u6ce8\u610f\u4e8b\u9805\u4e8c"),i.a.createElement("p",null,"\u87a2\u5e55\u4f11\u7720\u81ea\u52d5\u9396\u5b9a\u8981\u53d6\u6d88\uff08\u907f\u514d\u87a2\u5e55\u95dc\u6389\uff0c\u9ad4\u9a57\u904e\u7a0b\u88ab\u4e2d\u65b7\uff09\u3002")),i.a.createElement("div",{className:"tutorial__button"},i.a.createElement("span",null,i.a.createElement("img",{src:b.a,alt:"next",onClick:function(){return o(a+1)}})))),4===a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"tutorial__content"},i.a.createElement("h2",null,"\u884c\u524d\u6ce8\u610f\u4e8b\u9805\u4e09"),i.a.createElement("p",null,"\u5916\u51fa\u524d\u8acb\u7559\u610f\u96fb\u5b50\u7528\u54c1\u662f\u5426\u5145\u96fb\u5b8c\u6210\u3002\u6d3b\u52d5\u7576\u5929\u9ede\u958b Web App \u5373\u53ef\u958b\u59cb\u9ad4\u9a57\u3002")),i.a.createElement("div",{className:"tutorial__button"},i.a.createElement("span",null,i.a.createElement("img",{src:b.a,alt:"next",onClick:function(){return o(a+1)}})))),5===a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"tutorial__content"},i.a.createElement("h2",null,"\u884c\u524d\u6ce8\u610f\u4e8b\u9805\u56db"),i.a.createElement("p",null,"\u9019\u662f\u4e00\u5834\u900f\u904e\u667a\u6167\u578b\u624b\u6a5f\u8072\u97f3\u8207\u756b\u9762\u5f15\u5c0e\u7684\u975c\u5fc3\u3001\u6162\u884c\u9ad4\u9a57\u6d3b\u52d5\u3002\u904e\u7a0b\u4e2d\uff0c\u5982\u679c\u51fa\u73fe\u300c\u63d0\u793a\u6309\u9215\u300d\uff0c\u8acb\u4e0d\u8981\u6025\u5594\uff01",i.a.createElement("br",null),"\u9080\u8acb\u60a8\uff0c\u807d\u5b8c\u300c\u8072\u97f3\u5f15\u5c0e\u300d\uff0c\u6216\u662f\u62b5\u9054\u300c\u756b\u9762\u5f15\u5c0e\u7684\u76ee\u7684\u5730\u300d\u5f8c\uff0c\u518d\u300c\u6309\u4e0b\u300d\u63d0\u793a\u6309\u9215\u3002\u8b93\u6211\u5011\u9ad4\u6703\u6162\u4e0b\u4f86\u7684\u751f\u547d\u7bc0\u594f\u3002")),i.a.createElement("div",{className:"tutorial__button"},i.a.createElement("span",null,i.a.createElement("img",{src:b.a,alt:"next",onClick:function(){return o(a+1)}})))),6===a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"tutorial__content"},i.a.createElement("h2",null,"\u884c\u524d\u6ce8\u610f\u4e8b\u9805\u4e94"),i.a.createElement("p",null,"\u8b93\u6211\u5011\u4e00\u8d77\u5e36\u8457\u8033\u6a5f\uff0c\u4eab\u53d7\u5c6c\u65bc\u81ea\u5df1\u7684\u5fc3\u9748\u65c5\u7a0b\u3002")),i.a.createElement("div",{className:"tutorial__button"},i.a.createElement("span",null,i.a.createElement("img",{src:b.a,alt:"next",onClick:function(){return o(a+1)}})))),7===a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"tutorial__content"},i.a.createElement("h2",null,"\u65c5\u7a0b\u9ad4\u9a57\u7684\u4ecb\u9762\u8aaa\u660e")),i.a.createElement("div",{className:"tutorial__button"},i.a.createElement("span",null,i.a.createElement("img",{src:b.a,alt:"next",onClick:function(){return o(a+1)}})))),8===a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"tutorial__ui"},i.a.createElement("div",{className:"screen__container"},i.a.createElement("h2",null,"\u7da0\u8272\u96a7\u9053\u7684\u5fae\u7b11"),i.a.createElement("h3",null,"\u8046\u807d\u68ee\u6797\u4e09\u5206\u9418"),i.a.createElement("div",{className:"controll__container"},i.a.createElement("div",{style:{flex:1}}),i.a.createElement("div",{style:{flex:2}},i.a.createElement("a",{href:"test"},"\u7e7c\u7e8c\u5f80\u524d")),i.a.createElement("div",{style:{flex:1}},i.a.createElement("span",{className:"textButton"},"\u8df3\u904e")))),i.a.createElement("div",{className:"tutorial__container",style:{top:0,flexDirection:"column"}},i.a.createElement("div",{style:{backgroundImage:"url("+k.a+")",backgroundRepeat:"no-repeat",backgroundSize:"60%",backgroundPosition:"center 8vw",width:"100%"}},i.a.createElement("h3",{style:{marginTop:"45vw"}},"\u63d0\u793a\u60a8\u76ee\u524d\u8eab\u8655\u5834\u57df\u7684\u9ad4\u9a57\u4e3b\u984c\u3002")),i.a.createElement("div",{style:{height:100,textAlign:"right"}},i.a.createElement("div",{style:{height:100},className:"tutorial__button"},i.a.createElement("span",{style:{display:"inline-block"}},i.a.createElement("img",{src:b.a,alt:"next",onClick:function(){return o(a+1)}})))),i.a.createElement("div",{style:{backgroundImage:"url("+x.a+")",backgroundRepeat:"no-repeat",backgroundSize:"60%",display:"flex",flexDirection:"column-reverse",backgroundPosition:"center bottom",width:"100%"}},i.a.createElement("h3",{style:{marginBottom:"45vw"}},"\u7576\u6b64\u8655\u51fa\u73fe\u6309\u9215\uff0c",i.a.createElement("br",null),"\u4ee3\u8868\u60a8\u53ef\u6309\u4e0b\u505a\u51fa\u9078\u64c7\u3002"))))),9===a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"tutorial__ui"},i.a.createElement("div",{className:"screen__container"},i.a.createElement("h2",null,"\u7da0\u8272\u96a7\u9053\u7684\u5fae\u7b11"),i.a.createElement("h3",null,"\u8046\u807d\u68ee\u6797\u4e09\u5206\u9418"),i.a.createElement("div",{className:"controll__container",style:{bottom:10}},i.a.createElement("div",{style:{flex:1}}),i.a.createElement("div",{style:{flex:2}},i.a.createElement("a",{href:"test"},"\u7e7c\u7e8c\u5f80\u524d")),i.a.createElement("div",{style:{flex:1}},i.a.createElement("span",{className:"textButton"},"\u8df3\u904e")))),i.a.createElement("div",{className:"tutorial__container",style:{top:0,flexDirection:"column"}},i.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"row",backgroundImage:"url("+y.a+")",backgroundRepeat:"no-repeat",backgroundSize:"30%",backgroundPosition:"68vw bottom",width:"100%"}},i.a.createElement("p",{style:{flex:1,marginTop:100,paddingLeft:48,textAlign:"justify"}},"\u7576\u60a8\u770b\u5230\u6b64\u8655\u51fa\u73fe\u300c\u8df3\u904e\u300d\u5b57\u6a23\uff0c\u8868\u793a\u60a8\u76ee\u524d\u843d\u5f8c\u65bc\u5927\u5bb6\u7684\u9ad4\u9a57\u65c5\u7a0b\u3002",i.a.createElement("br",null),"\u9ede\u9078\u300c\u8df3\u904e\u300d\u5b57\u6a23\uff0c\u5373\u53ef\u8df3\u904e\u6b64\u6bb5\u9ad4\u9a57\uff0c\u76f4\u63a5\u8d95\u4e0a\u5927\u5bb6\u6b63\u5728\u9032\u884c\u7684\u4e3b\u984c\u3002",i.a.createElement("br",null),"\u82e5\u60a8\u60f3\u5b8c\u6574\u9ad4\u9a57\u6574\u8d9f\u65c5\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u5ffd\u7565\u6b64\u6309\u9215\uff0c\u597d\u597d\u975c\u5fc3\u807d\u5b8c\u60a8\u6240\u5728\u7684\u9ad4\u9a57\u4e3b\u984c\u3002"),i.a.createElement("div",{style:{height:100,width:114},className:"tutorial__button"},i.a.createElement("span",{style:{display:"inline-block"}},i.a.createElement("img",{src:b.a,alt:"next",onClick:function(){return o(a+1)}})))))))))};var O=function(e){var t=e.script,a=e.playAudio,n=e.detect,o=n.serviceworker,r=n.standalone,l=n.ios,c=n.android,s=n.safari,m=n.chrome,u=n.onAir,d=n.installPrompt;return i.a.createElement("div",{className:"welcome__container"},!r&&!u&&!l&&!c&&i.a.createElement(v,null,i.a.createElement("h2",null,"\u6b61\u8fce\u4f86\u5230\u5b89\u5fc3\u57ce\u5e02 App"),i.a.createElement("p",null,"\u8acb\u4f7f\u7528\u884c\u52d5\u88dd\u7f6e\u6253\u958b\u9019\u500b\u7db2\u9801\uff0c\u5c07\u6703\u5f15\u5c0e\u60a8\u5b89\u88dd\u5230\u60a8\u7684\u624b\u6a5f\u4e4b\u4e2d\u3002"),i.a.createElement("p",null,"\u4f7f\u7528 iPhone \u624b\u6a5f\uff0c\u8acb\u7528 Safari \u700f\u89bd\u5668\u6253\u958b\uff0c\u6216\u4f7f\u7528 Android \u624b\u6a5f\u6642\uff0c\u8acb\u7528 Chrome \u700f\u89bd\u5668\u6253\u958b\u3002")),!r&&!u&&c&&(!m||!o)&&i.a.createElement(v,null,i.a.createElement("h2",null,"\u6b61\u8fce\u4f86\u5230\u5b89\u5fc3\u57ce\u5e02 App"),i.a.createElement("p",null,"\u4f7f\u7528 Android \u624b\u6a5f\u6642\uff0c\u8acb\u7528 Chrome \u700f\u89bd\u5668\u6253\u958b\u3002\u5c07\u5f15\u5c0e\u60a8\u5b89\u88dd App \u81f3\u624b\u6a5f\u4e2d\u3002")),!r&&!u&&l&&(!s||!o)&&i.a.createElement(v,null,i.a.createElement("h2",null,"\u6b61\u8fce\u4f86\u5230\u5b89\u5fc3\u57ce\u5e02 App"),i.a.createElement("p",null,"\u4f7f\u7528 iPhone \u624b\u6a5f\u6642\uff0c\u8acb\u7528 Safari \u700f\u89bd\u5668\u6253\u958b\u3002\u5c07\u5f15\u5c0e\u60a8\u5b89\u88dd App \u81f3\u624b\u6a5f\u4e2d\u3002")),!r&&o&&!u&&c&&m&&i.a.createElement(i.a.Fragment,null,i.a.createElement(v,null,!d&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"loader"},i.a.createElement("svg",{className:"circular",viewBox:"25 25 50 50"},i.a.createElement("circle",{className:"path",cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"2",strokeMiterlimit:"10"}))),i.a.createElement("h4",null,"\u5b89\u88dd\u7a0b\u5e8f\u6e96\u5099\u4e2d\uff0c\u8acb\u7a0d\u5019\u3002",i.a.createElement("br",null),"\u8acb\u4f7f\u7528 Google Chrome \u6253\u958b\u3002")),d&&i.a.createElement(i.a.Fragment,null,i.a.createElement("h4",null,"\u5b89\u88dd\u7a0b\u5e8f\u6e96\u5099\u5b8c\u6210"),i.a.createElement("h4",null,"\u9ede\u9078\u5b89\u88dd\uff0c",i.a.createElement("br",null),"\u518d\u5f9e\u4e3b\u756b\u9762\u6253\u958bApp\u3002"))),d&&i.a.createElement("div",{style:{position:"relative",top:"70%"}},i.a.createElement("span",{className:"button"},"\u5b89\u88dd App"))),!r&&o&&!u&&l&&s&&i.a.createElement(v,{position:"bottom"},"\u8acb\u5148\u9ede\u9078",i.a.createElement("span",{style:{display:"inline-block",margin:"0 5px"}},i.a.createElement("img",{width:"14",style:{verticalAlign:"text-bottom"},className:"ico_message_1",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAuBAMAAADNZLQ8AAAAMFBMVEUAAAANeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOrHWcYsAAAAD3RSTlMA/RB6BWnS7h2ovJI4VC5qdH4TAAAAgElEQVQoz2OAAJbJDCjA6/8GZC7T+v+/kflq////n4LgcuR//m//0wHOb/9v8J/5/xIYl6/+M8N/hvhvClD++f8BQD7r/ySo3fVfGYB8hvu/YfIBYD5vEsx4BjAfAUjhK4EAEv8/CAApGAvBr4fwUfSP8mEBN2j4KACd/50BDQAAMr+eMCY8kqkAAAAASUVORK5CYII=",alt:"safari menu button"})),"\u518d\u9078\u64c7[\u52a0\u5165\u4e3b\u756b\u9762]\uff0c\u4e26\u9ede\u9078[\u65b0\u589e]\uff0c\u5c07 App \u4e0b\u8f09\u81f3\u60a8\u7684\u624b\u6a5f\u4e2d\u3002"),(r||u)&&i.a.createElement(S,null),i.a.createElement("div",{className:"welcome__ui"},i.a.createElement("div",{className:"welcome__logo"}),(r||u)&&i.a.createElement(g,{playAudio:a,time:t.event.startTime,initialScene:t.event.initialScene})))},j=(a(46),a(27)),C=a.n(j),D=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={showAction:!1,showQuestion:!1,showSkip:!1,screen:0},n.skip=n.skip.bind(Object(u.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.change()}},{key:"componentDidUpdate",value:function(e){e.match.params.id!==this.props.match.params.id&&this.change()}},{key:"change",value:function(){var e=this;window.gtag("config","UA-173216760-1",{page_path:window.location.pathname+"/scene/"+this.props.match.params.id});var t=this.props.script.scene[this.props.match.params.id];if(window.clearTimeout(this.timeoutAction),window.clearTimeout(this.timeoutQuestion),window.clearTimeout(this.timeoutSkip),window.clearTimeout(this.timeoutNext),window.clearTimeout(this.timeoutScreen),t.autoNext){if(t.autoNext.getTime()-(new Date).getTime()<0)return void this.props.history.push("/scene/"+t.nextScene);this.timeoutNext=window.setTimeout((function(){e.props.history.push("/scene/"+t.nextScene)}),t.autoNext.getTime()-(new Date).getTime())}this.setState({showAction:!1,showQuestion:!1,showSkip:t.startTime.getTime()+t.actionAppear+3e5-(new Date).getTime()<0,screen:0}),t.startTime.getTime()+t.actionAppear+3e5-(new Date).getTime()>0&&(this.timeoutSkip=window.setTimeout((function(){e.setState({showSkip:!0})}),t.startTime.getTime()+t.actionAppear+3e5-(new Date).getTime())),t.action&&(this.timeoutAction=window.setTimeout((function(){e.setState({showAction:!0})}),t.actionAppear)),t.question&&(this.timeoutQuestion=window.setTimeout((function(){e.setState({showQuestion:!0})}),t.question.appear)),t.screen.forEach((function(a){a.duration&&window.setTimeout((function(){e.setState({screen:e.state.screen+1})}),a.duration-(t.simultaneous?new Date-t.startTime:0))})),this.props.playAudio(this.props.match.params.id)}},{key:"skip",value:function(){var e=this.props.script.scene[this.props.match.params.id];window.clearTimeout(this.timeoutAction),window.clearTimeout(this.timeoutQuestion),window.clearTimeout(this.timeoutSkip),window.clearTimeout(this.timeoutNext),window.clearTimeout(this.timeoutScreen),e.action&&1===e.action.length?this.props.history.push("/scene/"+e.action[0].nextScene):this.setState({showAction:!0,showQuestion:!0,showSkip:!1})}},{key:"render",value:function(){var e=this.props.script.scene[this.props.match.params.id],t=this.state,a=t.showQuestion,n=t.showAction,o=t.showSkip,r=t.screen;return i.a.createElement("div",{className:"scene__container"},i.a.createElement("div",{className:"background__container"},e.screen.map((function(e,t){return i.a.createElement("div",{className:"background__screen",style:{opacity:t===r?1:0,backgroundImage:"url(".concat("/static/images/"+encodeURIComponent(e.background),")"),backgroundPosition:e.background.match("^FINALE")?"center":"bottom center"}})}))),i.a.createElement("div",{className:"screen__container"},i.a.createElement("h2",{dangerouslySetInnerHTML:{__html:e.title}}),i.a.createElement("h3",{dangerouslySetInnerHTML:{__html:e.subtitle}}),i.a.createElement("div",{className:"controll__container"},i.a.createElement("div",{style:{flex:1}},(n||o)&&e.action&&i.a.createElement("img",{className:"charator",src:C.a,alt:"chatactor"})),i.a.createElement("div",{style:{flex:2}},e.action&&n&&e.action.map((function(e){return i.a.createElement(f.a,{key:e.nextScene,to:e.nextScene},e.buttonName)}))),i.a.createElement("div",{style:{flex:1}},o&&!a&&!n&&(e.action||e.question)&&i.a.createElement("span",{onClick:this.skip,className:"textButton"},"\u8df3\u904e"))),e.question&&a&&i.a.createElement("div",{className:"question__container"},i.a.createElement("div",{className:"question__dialog"},e.question.title),e.question.answer.map((function(e){return i.a.createElement(f.a,{key:e.nextScene,to:e.nextScene},e.buttonName)})))))}}]),a}(i.a.Component),M=new Date>new Date(2020,6,26,0,0,0)?new Date:new Date(2020,6,25,16,0,0),P=function(e,t,a){return 1e3*(60*(60*e+t)+a)},B={event:{name:"\u5fa9\u8208\u9ad8\u4e2d \u6539\u8b8a\u7684\u529b\u91cf",startTime:M,initialScene:"C.START",waitingSoundFile:null},scene:{"C.START":{startTime:M,soundDuration:P(0,47,28),simultaneous:!1,origionalSoundFile:"F \u5fa9\u8208\u9ad8\u4e2d \u6539\u8b8a\u7684\u529b\u91cf Mix1 1001.mp3",title:"",subtitle:"",screen:[{background:"A1.Q_\u5167\u5bb91.png",duration:P(0,47,16)},{background:"FINALE_\u5167\u5bb93.png"}],question:null,actionAppear:null,action:null}}},I=(a(47),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={size:"100vw"},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;window.gtag("config","UA-173216760-1",{page_path:window.location.pathname+"/start/"+t}),window.setTimeout((function(){e.setState({size:"500vw"})}),2e3),window.setTimeout((function(){e.props.history.push("/scene/"+t)}),4e3)}},{key:"render",value:function(){return i.a.createElement("div",{className:"start__container",style:{backgroundSize:this.state.size}})}}]),a}(i.a.Component)),R=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a),(e=t.call(this)).addToHomeScreen=function(t){e.installPromptEvent&&!e.state.detect.onAir&&(e.installPromptEvent.prompt(),e.installPromptEvent.userChoice.then((function(t){t.outcome,e.installPromptEvent=null})))},e.playAudio=function(t){"BGM"!==t&&(document.getElementById("audioEl").loop=!1);var a="".concat("","/static/media/").concat(t,".m4a"),n=new XMLHttpRequest;n.open("GET",encodeURI(a),!0),n.setRequestHeader("Content-Type","application/json"),n.responseType="blob",n.onload=function(){var a=URL.createObjectURL(new Blob([n.response],{type:"audio/mp4"}));e.audio.src=a,e.audio.onload=function(){URL.revokeObjectURL(a)},B.scene[t]&&B.scene[t].simultaneous&&(e.audio.addEventListener("canplay",(function(){e.audio.currentTime=((new Date).getTime()-B.scene[t].startTime.getTime())/1e3}),{once:!0}),window.setInterval((function(){Math.abs(e.audio.currentTime-((new Date).getTime()-B.scene[t].startTime.getTime())/1e3)>1&&(e.audio.currentTime=((new Date).getTime()-B.scene[t].startTime.getTime())/1e3)}),1e3));var i=e.audio.play();void 0!==i&&i.then((function(e){})).catch((function(e){}))},n.send()};var n=navigator.userAgent,i=new RegExp("(".concat(["WebView","(iPhone|iPod|iPad)(?!.*Safari/)","Android.*(wv|.0.0.0)"].join("|"),")"),"ig"),o=window.hasOwnProperty("ServiceWorker");return o&&o&&navigator.serviceWorker.controller&&(o=navigator.serviceWorker.controller.state),e.audio={},e.state={detect:{serviceworker:o,standalone:window.matchMedia("(display-mode: standalone)").matches||navigator.hasOwnProperty("standalone"),ios:new RegExp("(iPhone|iPod|iPad)").test(n),android:new RegExp("Android").test(n),chrome:-1!==navigator.userAgent.indexOf("Chrome/"),safari:-1!==navigator.userAgent.indexOf("Safari/")&&-1===navigator.userAgent.indexOf("Chrome/"),webview:i.test(n),onAir:(new Date).getTime()-B.event.startTime.getTime()>0,installPrompt:!1}},e.playAudio=e.playAudio.bind(Object(u.a)(e)),e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("touchstart",(function(){if(e.state.detect.onAir||e.state.detect.standalone){var t=e.audio.play();void 0!==t&&t.then((function(e){})).catch((function(e){}))}})),document.addEventListener("visibilitychange",(function(){if(e.state.detect.onAir||e.state.detect.standalone){var t=e.audio.play();void 0!==t&&t.then((function(e){})).catch((function(e){}))}})),this.audio.addEventListener("ended",(function(){e.audio.src=""})),this.state.detect.onAir||window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),e.installPromptEvent=t,e.installPromptEvent.prompt&&document.querySelector("#root").addEventListener("click",e.addToHomeScreen,{once:!0});var a=Object(c.a)({},e.state.detect);a.installPrompt=!0,e.setState({detect:a})})),this.state.detect.onAir||window.setTimeout((function(){var t=Object(c.a)({},e.state.detect);t.onAir=!0,e.setState({detect:t})}),B.event.startTime.getTime()-(new Date).getTime())}},{key:"render",value:function(){var e=this,t=this.state.detect,a=this.props.location;return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"console",style:{height:"auto"},id:"log",ref:function(t){e.log=t}}),i.a.createElement(h.a,{childFactory:function(e){return i.a.cloneElement(e)}},i.a.createElement(E.a,{key:a.key,classNames:"fade",timeout:2e3},i.a.createElement(l.d,{location:a},i.a.createElement(l.b,{exact:!0,path:"/"},i.a.createElement(O,{detect:t,script:B,playAudio:this.playAudio})),i.a.createElement(l.b,{path:"/start/:id",render:function(e){return i.a.createElement(I,Object.assign({},e,{script:B}))}}),i.a.createElement(l.b,{path:"/scene/:id",render:function(t){return i.a.createElement(D,Object.assign({},t,{playAudio:e.playAudio,script:B}))}})))),i.a.createElement("audio",{crossOrigin:"anonymous",loop:!0,autoPlay:!1,ref:function(t){e.audio=t},id:"audioEl"}))}}]),a}(i.a.Component),F=Object(l.g)(R),L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;console.log("installing"),null!=a?a.onstatechange=function(){console.log(a.state),"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}:console.log("can not install")}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var W=l.a;r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(W,{basename:""},i.a.createElement(F,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");L?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):U(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):(console.log("Is not localhost. Just register service worker"),U(t,e))}))}}()}],[[30,1,2]]]);
//# sourceMappingURL=main.cafcd5e7.chunk.js.map
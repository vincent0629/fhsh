{"version":3,"sources":["components/svg/next.svg","components/Tutorial/skip.svg","components/Tutorial/top.svg","components/Tutorial/bottom.svg","components/Scene/slice_c.svg","components/Dialog/index.js","components/Countdown/index.js","components/Tutorial/index.js","components/Welcome/index.js","components/Scene/index.js","script.js","components/Start/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Dialog","props","className","position","join","style","backgroundImage","children","Countdown","t","time","Date","state","d","Math","floor","h","m","s","start","this","playAudio","interval","window","setInterval","setState","clearInterval","initialScene","to","React","Component","Tutorial","useState","step","setStep","Fragment","display","src","nextSvg","alt","onClick","flex","href","top","flexDirection","backgroundRepeat","backgroundSize","backgroundPosition","width","marginTop","height","textAlign","bottom","marginBottom","alignItems","skip","paddingLeft","Welcome","script","detect","serviceworker","standalone","ios","android","safari","chrome","onAir","installPrompt","viewBox","cx","cy","r","fill","strokeWidth","strokeMiterlimit","margin","verticalAlign","event","startTime","Scene","showAction","showQuestion","showSkip","screen","bind","change","prevProps","match","params","id","gtag","page_path","location","pathname","scene","clearTimeout","timeoutAction","timeoutQuestion","timeoutSkip","timeoutNext","timeoutScreen","autoNext","getTime","history","push","nextScene","setTimeout","actionAppear","action","question","appear","forEach","element","duration","simultaneous","length","map","el","index","opacity","encodeURIComponent","background","dangerouslySetInnerHTML","__html","title","subtitle","charator","e","key","buttonName","answer","name","waitingSoundFile","soundDuration","origionalSoundFile","Start","size","App","addToHomeScreen","installPromptEvent","prompt","userChoice","then","choice","outcome","document","getElementById","loop","url","process","request","XMLHttpRequest","open","encodeURI","setRequestHeader","responseType","onload","objectUrl","URL","createObjectURL","Blob","response","type","audio","revokeObjectURL","addEventListener","currentTime","once","abs","playPromise","play","undefined","_","catch","error","send","useragent","navigator","userAgent","webviewRegex","RegExp","hasOwnProperty","serviceWorker","controller","matchMedia","matches","test","indexOf","webview","preventDefault","querySelector","ref","log","TransitionGroup","childFactory","child","cloneElement","CSSTransition","classNames","timeout","exact","path","render","routeProps","crossOrigin","autoPlay","withRouter","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","register","registration","onupdatefound","installingWorker","installing","console","onstatechange","onUpdate","onSuccess","Router","MemoryRouter","ReactDOM","StrictMode","basename","origin","fetch","headers","contentType","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.cafcd5e7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/next.d0808652.svg\";","module.exports = __webpack_public_path__ + \"static/media/skip.9ff1744a.svg\";","module.exports = __webpack_public_path__ + \"static/media/top.daa0a7fb.svg\";","module.exports = __webpack_public_path__ + \"static/media/bottom.c2a0e866.svg\";","module.exports = __webpack_public_path__ + \"static/media/slice_c.b50a0cb1.svg\";","import React from 'react';\n\nimport './style.scss';\n\nfunction Dialog(props) {\n  return (\n    <div className={[\"dialog__container\", props.position ? props.position : \"\"].join(' ')} style={{backgroundImage: 'url(./logo192.png)'}}>\n      <div className=\"dialog__div\">\n        {props.children}\n      </div>\n    </div>\n  )\n}\n\nexport default Dialog;","import React from 'react';\nimport './style.scss';\nimport { Link } from 'react-router-dom';\n\nclass Countdown extends React.Component {\n\n  constructor(props) {\n    super();\n    let t = props.time - new Date();\n    this.state = {\n      d: Math.floor(t / 60 / 60 / 24 / 1000),\n      h: Math.floor(t / 1000/ 60 / 60 % 24),\n      m: Math.floor(t / 1000/ 60 % 60),\n      s: Math.floor(t / 1000 % 60),\n      start: t < 0\n    };\n  }\n\n  componentDidMount() {\n    this.props.playAudio('BGM');\n    this.interval = window.setInterval(() => {\n      let t = this.props.time - new Date();\n      this.setState({\n        d: Math.floor(t / 60 / 60 / 24 / 1000),\n        h: Math.floor(t / 1000/ 60 / 60 % 24),\n        m: Math.floor(t / 1000/ 60 % 60),\n        s: Math.floor(t / 1000 % 60),\n        start: t < 0\n      });\n      if(t < 0) {\n        window.clearInterval(this.interval);\n      }\n    }, 1000);\n  }\n\n  componentWillUnmount() {\n    window.clearInterval(this.interval);\n  }\n\n  render() {\n    const { d, h, m, s, start } = this.state;\n    const { initialScene } = this.props;\n    return (<div className=\"countdown__container\">\n      { !start && (<div className=\"countdown__layout\">\n        <h3>活動倒數</h3>\n        <div className=\"countdown__timer\">\n          <span className=\"countdown__field\">{d}</span>天\n          <span className=\"countdown__field\">{h}</span>時\n          <span className=\"countdown__field\">{m}</span>分\n          <span className=\"countdown__field\">{s}</span>秒\n        </div>\n      </div>) }\n      { start && (<div className=\"countdown__layout\">\n        <Link to={\"/start/\" + initialScene}>準備啟程出發</Link>\n        </div>)}\n    </div>);\n  }\n}\n\nexport default Countdown;","import React, { useState } from 'react';\nimport './style.scss';\nimport nextSvg from '../svg/next.svg';\nimport skip from './skip.svg';\nimport top from './top.svg';\nimport bottom from './bottom.svg';\n\nfunction Tutorial() {\n\n  let [step, setStep] = useState(1);\n\n  return (<React.Fragment>\n    <div style={{display: (step!==10 ? 'flex': 'none')}} className=\"tutorial__container\">\n      {step===1 && <React.Fragment>\n        <div className=\"tutorial__content\">\n          <h1>歡迎來到<br/>安心城市!</h1>\n          <h2>體驗旅程行前說明</h2>\n        </div>\n        <div className=\"tutorial__button\"><span><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n      </React.Fragment>}\n      {step===2 && <React.Fragment>\n        <div className=\"tutorial__content\">\n          <h2>行前注意事項一</h2>\n          <p>為了擁有最好的體驗品質,<br/>全程一定要戴耳機。</p>\n          <p>關掉所有社群通知,請開啟「勿擾模式」。</p>\n        </div>\n        <div className=\"tutorial__button\"><span><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n      </React.Fragment>}\n      {step===3 && <React.Fragment>\n        <div className=\"tutorial__content\">\n          <h2>行前注意事項二</h2>\n          <p>螢幕休眠自動鎖定要取消（避免螢幕關掉，體驗過程被中斷）。</p>\n        </div>\n        <div className=\"tutorial__button\"><span><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n      </React.Fragment>}\n      {step===4 && <React.Fragment>\n        <div className=\"tutorial__content\">\n          <h2>行前注意事項三</h2>\n          <p>外出前請留意電子用品是否充電完成。活動當天點開 Web App 即可開始體驗。</p>\n        </div>\n        <div className=\"tutorial__button\"><span><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n      </React.Fragment>}\n      {step===5 && <React.Fragment>\n        <div className=\"tutorial__content\">\n          <h2>行前注意事項四</h2>\n          <p>這是一場透過智慧型手機聲音與畫面引導的靜心、慢行體驗活動。過程中，如果出現「提示按鈕」，請不要急喔！<br/>邀請您，聽完「聲音引導」，或是抵達「畫面引導的目的地」後，再「按下」提示按鈕。讓我們體會慢下來的生命節奏。</p>\n        </div>\n        <div className=\"tutorial__button\"><span><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n      </React.Fragment>}\n      {step===6 && <React.Fragment>\n        <div className=\"tutorial__content\">\n          <h2>行前注意事項五</h2>\n          <p>讓我們一起帶著耳機，享受屬於自己的心靈旅程。</p>\n        </div>\n        <div className=\"tutorial__button\"><span><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n      </React.Fragment>}\n      {step===7 && <React.Fragment>\n        <div className=\"tutorial__content\">\n          <h2>旅程體驗的介面說明</h2>\n        </div>\n        <div className=\"tutorial__button\"><span><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n      </React.Fragment>}\n      {step===8 && <React.Fragment>\n        <div className=\"tutorial__ui\">\n          <div className=\"screen__container\">\n            <h2>綠色隧道的微笑</h2>\n            <h3>聆聽森林三分鐘</h3>\n            <div className=\"controll__container\">\n            <div style={{flex:1}}>\n              \n            </div>\n            <div style={{flex:2}}>\n              <a href=\"test\">繼續往前</a>\n            </div>\n            <div style={{flex:1}}>\n              <span className=\"textButton\">跳過</span> \n            </div>\n            </div>\n          </div>\n          <div className=\"tutorial__container\" style={{top: 0, flexDirection: 'column'}}>\n            <div style={{backgroundImage: 'url('+top+')', backgroundRepeat:'no-repeat', backgroundSize: '60%', backgroundPosition: 'center 8vw', width: '100%'}}>\n              <h3 style={{marginTop: '45vw'}}>提示您目前身處場域的體驗主題。</h3>\n            </div>\n            <div style={{height: 100, textAlign:'right'}}>\n              <div style={{height: 100}} className=\"tutorial__button\"><span style={{display:'inline-block'}}><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n            </div>\n            <div style={{backgroundImage: 'url('+bottom+')', backgroundRepeat:'no-repeat', backgroundSize: '60%', display:'flex', flexDirection:'column-reverse', backgroundPosition: 'center bottom', width: '100%'}}>\n              <h3 style={{marginBottom:'45vw'}}>當此處出現按鈕，<br/>代表您可按下做出選擇。</h3>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>}\n      {step===9 && <React.Fragment>\n        <div className=\"tutorial__ui\">\n          <div className=\"screen__container\">\n            <h2>綠色隧道的微笑</h2>\n            <h3>聆聽森林三分鐘</h3>\n            <div className=\"controll__container\" style={{bottom: 10}}>\n            <div style={{flex:1}}>\n              \n            </div>\n            <div style={{flex:2}}>\n              <a href=\"test\">繼續往前</a>\n            </div>\n            <div style={{flex:1}}>\n              <span className=\"textButton\">跳過</span> \n            </div>\n            </div>\n          </div>\n          <div className=\"tutorial__container\" style={{top: 0, flexDirection: 'column'}}>\n            <div style={{display: 'flex', alignItems:'center', flexDirection:'row', backgroundImage: 'url('+skip+')', backgroundRepeat:'no-repeat', backgroundSize: '30%', backgroundPosition: '68vw bottom', width: '100%'}}>\n            <p style={{flex: 1, marginTop: 100, paddingLeft: 48, textAlign:'justify'}}>\n              當您看到此處出現「跳過」字樣，表示您目前落後於大家的體驗旅程。<br/>\n              點選「跳過」字樣，即可跳過此段體驗，直接趕上大家正在進行的主題。<br/>\n              若您想完整體驗整趟旅程，也可以忽略此按鈕，好好靜心聽完您所在的體驗主題。\n              </p>\n              <div style={{height: 100, width: 114}} className=\"tutorial__button\"><span style={{display:'inline-block'}}><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n            </div>\n          </div>\n        </div>\n      </React.Fragment>}\n\n    </div>\n  </React.Fragment>);\n}\n\nexport default Tutorial;","import React from 'react';\nimport Dialog from '../Dialog';\nimport './style.scss';\nimport Countdown from '../Countdown';\nimport Tutorial from '../Tutorial';\n\nfunction Welcome(props) {\n  const { script, playAudio } = props;\n  let { serviceworker, standalone, ios, android, safari, chrome, onAir, installPrompt } = props.detect;\n  return (\n    <div className=\"welcome__container\">\n    {!standalone && !onAir && !ios && !android && (\n      <Dialog>\n        <h2>歡迎來到安心城市 App</h2>\n        <p>請使用行動裝置打開這個網頁，將會引導您安裝到您的手機之中。</p>\n        <p>使用 iPhone 手機，請用 Safari 瀏覽器打開，或使用 Android 手機時，請用 Chrome 瀏覽器打開。</p>\n      </Dialog>\n    )}\n    {!standalone && !onAir && android && (!chrome || !serviceworker) && (\n      <Dialog>\n        <h2>歡迎來到安心城市 App</h2>\n        <p>使用 Android 手機時，請用 Chrome 瀏覽器打開。將引導您安裝 App 至手機中。</p>\n      </Dialog>\n    )}\n    {!standalone && !onAir && ios && (!safari || !serviceworker) && (\n      <Dialog>\n        <h2>歡迎來到安心城市 App</h2>\n        <p>使用 iPhone 手機時，請用 Safari 瀏覽器打開。將引導您安裝 App 至手機中。</p>\n      </Dialog>\n    )}\n    {!standalone && serviceworker && !onAir && android && chrome && (\n      <React.Fragment>\n      <Dialog>\n        {!installPrompt && (<React.Fragment>\n          <div className=\"loader\">\n            <svg className=\"circular\" viewBox=\"25 25 50 50\">\n              <circle className=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\"/>\n            </svg>\n          </div>\n          <h4>安裝程序準備中，請稍候。<br/>請使用 Google Chrome 打開。</h4>\n          </React.Fragment>)}\n        {installPrompt && (<React.Fragment>\n          <h4>安裝程序準備完成</h4>\n          <h4>點選安裝，<br/>再從主畫面打開App。</h4>\n          </React.Fragment>)}\n      </Dialog>\n      {installPrompt && (\n        <div style={{position: \"relative\", top: '70%'}}><span className=\"button\">安裝 App</span></div>\n        )}\n      </React.Fragment>\n    )}\n    {!standalone && serviceworker && !onAir && ios && safari && (\n      <Dialog position=\"bottom\">\n        請先點選\n          <span style={{display:\"inline-block\", margin: '0 5px'}}><img width=\"14\" style={{verticalAlign:'text-bottom'}} className=\"ico_message_1\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAuBAMAAADNZLQ8AAAAMFBMVEUAAAANeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOrHWcYsAAAAD3RSTlMA/RB6BWnS7h2ovJI4VC5qdH4TAAAAgElEQVQoz2OAAJbJDCjA6/8GZC7T+v+/kflq////n4LgcuR//m//0wHOb/9v8J/5/xIYl6/+M8N/hvhvClD++f8BQD7r/ySo3fVfGYB8hvu/YfIBYD5vEsx4BjAfAUjhK4EAEv8/CAApGAvBr4fwUfSP8mEBN2j4KACd/50BDQAAMr+eMCY8kqkAAAAASUVORK5CYII=\" alt=\"safari menu button\"/></span>\n        再選擇[加入主畫面]，並點選[新增]，將 App 下載至您的手機中。\n      </Dialog>\n    )}\n    {(standalone || onAir) && (<Tutorial />)}\n      <div className=\"welcome__ui\">\n        <div className=\"welcome__logo\">\n        </div>\n        {(standalone || onAir) && (<Countdown playAudio={playAudio} time={script.event.startTime} initialScene={script.event.initialScene}></Countdown>)}\n      </div>\n    </div>\n  )\n}\n\nexport default Welcome;","import React from 'react';\nimport './style.scss';\nimport { Link } from 'react-router-dom';\n\nimport charator from './slice_c.svg';\n\nclass Scene extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showAction: false,\n      showQuestion: false,\n      showSkip: false,\n      screen: 0\n    };\n    this.skip = this.skip.bind(this);\n  }\n\n  componentDidMount() {\n    this.change();\n  }\n\n  componentDidUpdate(prevProps) {\n    if(prevProps.match.params.id !== this.props.match.params.id) {\n      this.change();\n    }\n  }\n\n  change() {\n    window.gtag(\"config\", 'UA-173216760-1', { page_path: window.location.pathname + '/scene/' + this.props.match.params.id });\n\n    const scene = this.props.script.scene[this.props.match.params.id];\n    window.clearTimeout(this.timeoutAction);\n    window.clearTimeout(this.timeoutQuestion);\n    window.clearTimeout(this.timeoutSkip);\n    window.clearTimeout(this.timeoutNext);\n    window.clearTimeout(this.timeoutScreen);\n\n    if(scene.autoNext) {\n      if(scene.autoNext.getTime() - (new Date()).getTime() < 0) {\n        this.props.history.push('/scene/' + scene.nextScene);\n        return;\n      } else {\n        this.timeoutNext = window.setTimeout(() => {\n          this.props.history.push('/scene/' + scene.nextScene);\n        }, scene.autoNext.getTime() - (new Date()).getTime());\n      }\n    }\n\n    this.setState({\n      showAction: false,\n      showQuestion: false,\n      showSkip: (scene.startTime.getTime() + scene.actionAppear + 300000 - (new Date()).getTime()) < 0,\n      screen: 0\n    });\n\n    if((scene.startTime.getTime() + scene.actionAppear + 300000 - (new Date()).getTime()) > 0) {\n      this.timeoutSkip = window.setTimeout(() => {\n        this.setState({showSkip: true})\n      },\n      scene.startTime.getTime() + scene.actionAppear + 300000 - (new Date()).getTime());\n    }\n\n    if(scene.action) {\n      this.timeoutAction = window.setTimeout(() => {\n        this.setState({showAction: true});\n      }, scene.actionAppear);\n    }\n\n    if(scene.question) {\n      this.timeoutQuestion = window.setTimeout(() => {\n        this.setState({showQuestion: true});\n      }, scene.question.appear);\n    }\n\n    scene.screen.forEach(element => {\n      if(element.duration) {\n        window.setTimeout(() => {\n          this.setState({screen: (this.state.screen + 1)});\n        }, element.duration - (scene.simultaneous ? (new Date() - scene.startTime) : 0));\n      }\n    });\n\n    this.props.playAudio(this.props.match.params.id);\n  }\n\n  skip() {\n    const scene = this.props.script.scene[this.props.match.params.id];\n    window.clearTimeout(this.timeoutAction);\n    window.clearTimeout(this.timeoutQuestion);\n    window.clearTimeout(this.timeoutSkip);\n    window.clearTimeout(this.timeoutNext);\n    window.clearTimeout(this.timeoutScreen);\n    if(scene.action&& scene.action.length === 1) {\n      this.props.history.push('/scene/' + scene.action[0].nextScene);\n    } else {\n      this.setState({showAction: true, showQuestion: true, showSkip: false});\n    }\n  }\n\n  render() {\n    const scene = this.props.script.scene[this.props.match.params.id];\n    const { showQuestion, showAction, showSkip, screen } = this.state;\n    return (<div className=\"scene__container\">\n      <div className=\"background__container\">\n        {scene.screen.map((el,index) => <div className=\"background__screen\" style={{\n          opacity: (index === screen ? 1 : 0),\n          backgroundImage: `url(${process.env.PUBLIC_URL + '/static/images/' + encodeURIComponent(el.background)})`,\n          backgroundPosition: el.background.match('^FINALE') ? 'center' : 'bottom center'}}>\n        </div>)}\n      </div>\n      <div className=\"screen__container\">\n        <h2 dangerouslySetInnerHTML={{__html: scene.title}}></h2>\n        <h3 dangerouslySetInnerHTML={{__html: scene.subtitle}}></h3>\n        <div className=\"controll__container\">\n          <div style={{flex:1}}>\n            {(showAction || showSkip) && scene.action && <img className=\"charator\" src={charator} alt=\"chatactor\"></img>}\n          </div>\n          <div style={{flex:2}}>\n            {scene.action && showAction && scene.action.map((e) => <Link key={e.nextScene} to={e.nextScene}>{e.buttonName}</Link>)}\n          </div>\n          <div style={{flex:1}}>\n            { showSkip && !showQuestion && !showAction && (scene.action || scene.question) && <span onClick={this.skip} className=\"textButton\">跳過</span> }\n          </div>\n        </div>\n        {scene.question && showQuestion && (<div className=\"question__container\">\n          <div className=\"question__dialog\">{scene.question.title}</div>\n          {scene.question.answer.map((answer) => <Link key={answer.nextScene} to={answer.nextScene}>{answer.buttonName}</Link>)}\n        </div>)}\n      </div>\n    </div>);\n  }\n}\n\nexport default Scene;","const startTime = new Date() > new Date(2020,6,26,0,0,0) ? new Date() : new Date(2020,6,25,16,0,0); // 活動開始時間 手機當地時間 注意月份起時為 0\nconst duration = (h,m,s) => ((h*60+m)*60+s)*1000;\n\nlet script = {\n  event: {\n    name: \"復興高中 改變的力量\",\n    startTime: startTime,\n    initialScene: \"C.START\",\n    waitingSoundFile: null,\n  },\n  scene: {\n    \"C.START\": {\n      startTime: startTime,\n      soundDuration: duration(0,47,28),\n      simultaneous: false,\n      origionalSoundFile: \"F 復興高中 改變的力量 Mix1 1001.mp3\",\n      title: \"\",\n      subtitle: \"\",\n      screen: [\n        {\n          background: \"A1.Q_內容1.png\",\n          duration: duration(0, 47, 16)\n        },\n        {\n          background: \"FINALE_內容3.png\"\n        }\n      ],\n      question: null,\n      actionAppear: null,\n      action: null,\n    },\n  }\n};\n\nexport default script;\n","import React from 'react';\n\nimport './style.scss';\n\nclass Start extends React.Component {\n\n  constructor() {\n    super();\n    this.state = {\n      size: '100vw'\n    }\n  }\n\n  componentDidMount() {\n    const {id} = this.props.match.params;\n\n    window.gtag(\"config\", 'UA-173216760-1', { page_path: window.location.pathname +'/start/' + id });\n\n    window.setTimeout(() => {\n      this.setState({size: '500vw'});\n    }, 2000);\n    window.setTimeout(() => {\n      this.props.history.push('/scene/' + id);\n    }, 4000);\n  }\n\n  render() {\n    return (\n      <div className=\"start__container\" style={{backgroundSize: this.state.size}}>\n      </div>\n    )\n  }\n}\n\nexport default Start;","import React from 'react';\nimport './App.scss';\nimport {\n  Switch,\n  Route\n} from 'react-router-dom';\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\nimport { withRouter } from \"react-router\";\n\nimport Welcome from './components/Welcome';\nimport Scene from './components/Scene';\nimport script from './script';\nimport Start from './components/Start';\n\nclass App extends React.Component {\n\n  constructor() {\n    super();\n    \n    let useragent = navigator.userAgent;\n    let rules = ['WebView','(iPhone|iPod|iPad)(?!.*Safari/)','Android.*(wv|.0.0.0)'];\n    let webviewRegex = new RegExp(`(${rules.join('|')})`, 'ig');\n    let serviceworker = window.hasOwnProperty('ServiceWorker');\n    if(serviceworker) {\n      if(serviceworker && navigator.serviceWorker.controller) {\n        serviceworker = navigator.serviceWorker.controller.state;\n      }\n    }\n\n    this.audio = {};\n\n    this.state = {\n      detect: {\n        serviceworker: serviceworker,\n        standalone: window.matchMedia('(display-mode: standalone)').matches || navigator.hasOwnProperty('standalone'),\n        ios: (new RegExp('(iPhone|iPod|iPad)')).test(useragent),\n        android: (new RegExp('Android')).test(useragent),\n        chrome: (navigator.userAgent.indexOf(\"Chrome/\") !== -1),\n        safari: (navigator.userAgent.indexOf(\"Safari/\") !== -1 && navigator.userAgent.indexOf(\"Chrome/\") === -1),\n        webview: webviewRegex.test(useragent),\n        onAir: ( new Date().getTime() - script.event.startTime.getTime() ) > 0,\n        installPrompt: false\n      }\n    };\n\n    this.playAudio = this.playAudio.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('touchstart', () => {\n      if(this.state.detect.onAir || this.state.detect.standalone) {\n        let playPromise = this.audio.play();\n        if (playPromise !== undefined) {\n          playPromise\n            .then(_ => {\n            })\n            .catch(error => {\n            });\n        }\n      }\n    });\n\n    document.addEventListener('visibilitychange', () => {\n      if(this.state.detect.onAir || this.state.detect.standalone) {\n        let playPromise = this.audio.play();\n        if (playPromise !== undefined) {\n          playPromise\n            .then(_ => {\n            })\n            .catch(error => {\n            });\n        }\n      }\n    });\n\n    this.audio.addEventListener('ended', () => {\n      this.audio.src=\"\";\n    });\n\n    if(!this.state.detect.onAir) {\n      window.addEventListener('beforeinstallprompt', (e) => {\n        e.preventDefault();\n        this.installPromptEvent = e\n        if (this.installPromptEvent.prompt) {\n          document.querySelector('#root').addEventListener('click', this.addToHomeScreen, {\n            once: true\n          });\n        }\n\n        let detect = { ...this.state.detect };\n        detect.installPrompt = true;\n        this.setState({detect: detect});\n        \n      });\n    }\n\n    if(!this.state.detect.onAir) {\n      window.setTimeout(() => {\n        let detect = { ...this.state.detect };\n        detect.onAir = true;\n        this.setState({detect: detect});\n      }, script.event.startTime.getTime() - new Date().getTime());\n    }\n  }\n\n  addToHomeScreen = (e) => {\n    if (this.installPromptEvent && !this.state.detect.onAir) {\n      this.installPromptEvent.prompt();\n      this.installPromptEvent.userChoice.then((choice) => {\n        if (choice.outcome === 'accepted') {\n        } else {\n        }\n        this.installPromptEvent = null;\n      });\n    }\n}\n\n  playAudio = (id) => {\n    if(id !== 'BGM') document.getElementById('audioEl').loop = false;\n    let url = `${process.env.PUBLIC_URL}/static/media/${id}.m4a`;\n    let request = new XMLHttpRequest();\n    request.open('GET', encodeURI(url), true);\n    request.setRequestHeader('Content-Type', 'application/json');\n    request.responseType = 'blob';\n    request.onload = () => {\n      var objectUrl = URL.createObjectURL(new Blob([request.response], {type: 'audio/mp4'}));\n      this.audio.src = objectUrl;\n      this.audio.onload = () => {\n        URL.revokeObjectURL(objectUrl);\n      };\n      if(script.scene[id] && script.scene[id].simultaneous) {\n        this.audio.addEventListener('canplay', () => {\n          this.audio.currentTime = ((new Date()).getTime() - script.scene[id].startTime.getTime()) / 1000;\n        }, {once: true});\n\n        window.setInterval(() => {\n          if(Math.abs(this.audio.currentTime - ((new Date()).getTime() - script.scene[id].startTime.getTime()) / 1000) > 1) {\n            this.audio.currentTime = ((new Date()).getTime() - script.scene[id].startTime.getTime()) / 1000;\n          }\n        }, 1000);\n      }\n\n      let playPromise = this.audio.play();\n      if (playPromise !== undefined) {\n        playPromise\n          .then(_ => {\n          })\n          .catch(error => {\n          });\n      }\n  };\n    request.send();\n  }\n\n  render() {\n    const { detect } = this.state;\n    const { location } = this.props;\n    return (\n      <div className=\"App\">\n        <div className=\"console\" style={{height: \"auto\"}} id=\"log\" ref={(element) => { this.log = element; }}></div>\n          <TransitionGroup childFactory={child => React.cloneElement(child)}>\n            <CSSTransition\n              key={location.key}\n              classNames='fade'\n              timeout={2000}\n            >\n              <Switch location={location}>\n                <Route exact path=\"/\">\n                  <Welcome detect={detect} script={script} playAudio={this.playAudio} />\n                </Route>\n                <Route path=\"/start/:id\" render={routeProps => (<Start {...routeProps} script={script}></Start>)} />\n                <Route path=\"/scene/:id\" render={routeProps => (<Scene {...routeProps} playAudio={this.playAudio} script={script}></Scene>)} />\n              </Switch>\n            </CSSTransition>\n          </TransitionGroup>\n        <audio crossOrigin=\"anonymous\" loop={true} autoPlay={false} ref={(element) => { this.audio = element; }} id=\"audioEl\" />\n    </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        console.log('Is not localhost. Just register service worker');\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        console.log('installing');\n        if (installingWorker == null) {\n          console.log('can not install');\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          console.log(installingWorker.state);\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { MemoryRouter, BrowserRouter } from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst Router = (process.env.NODE_ENV === 'production') ? MemoryRouter : BrowserRouter;\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router basename={ process.env.PUBLIC_URL }>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorker.register();\n"],"sourceRoot":""}
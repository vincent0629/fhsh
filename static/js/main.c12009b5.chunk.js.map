{"version":3,"sources":["components/svg/next.svg","components/Scene/slice_c.svg","components/Dialog/index.js","components/Countdown/index.js","components/Tutorial/index.js","components/Welcome/index.js","components/Scene/index.js","script.js","components/Start/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Dialog","props","className","position","join","style","backgroundImage","children","Countdown","t","time","Date","state","d","Math","floor","h","m","s","start","this","playAudio","interval","window","setInterval","setState","clearInterval","initialScene","to","React","Component","Tutorial","useState","step","setStep","Fragment","display","src","nextSvg","alt","onClick","Welcome","script","detect","serviceworker","standalone","ios","android","safari","chrome","onAir","installPrompt","viewBox","cx","cy","r","fill","strokeWidth","strokeMiterlimit","top","margin","width","verticalAlign","event","startTime","Scene","showAction","showQuestion","showSkip","screen","skip","bind","change","prevProps","match","params","id","gtag","page_path","location","pathname","scene","clearTimeout","timeoutAction","timeoutQuestion","timeoutSkip","timeoutNext","timeoutScreen","autoNext","getTime","history","push","nextScene","setTimeout","actionAppear","action","question","appear","forEach","element","duration","simultaneous","length","map","el","index","opacity","process","encodeURIComponent","background","backgroundPosition","dangerouslySetInnerHTML","__html","title","subtitle","flex","charator","e","key","buttonName","answer","name","waitingSoundFile","soundDuration","origionalSoundFile","Start","size","stopAudio","backgroundSize","App","addToHomeScreen","installPromptEvent","prompt","userChoice","then","choice","outcome","document","getElementById","loop","url","request","XMLHttpRequest","open","encodeURI","setRequestHeader","responseType","onload","objectUrl","URL","createObjectURL","Blob","response","type","audio","revokeObjectURL","addEventListener","currentTime","once","abs","playPromise","play","undefined","_","catch","error","send","pause","useragent","navigator","userAgent","webviewRegex","RegExp","hasOwnProperty","serviceWorker","controller","matchMedia","matches","test","indexOf","webview","preventDefault","querySelector","height","ref","log","TransitionGroup","childFactory","child","cloneElement","CSSTransition","classNames","timeout","exact","path","render","routeProps","crossOrigin","autoPlay","withRouter","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","register","registration","onupdatefound","installingWorker","installing","console","onstatechange","onUpdate","onSuccess","Router","MemoryRouter","ReactDOM","StrictMode","basename","href","origin","fetch","headers","contentType","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.c12009b5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/next.d0808652.svg\";","module.exports = __webpack_public_path__ + \"static/media/slice_c.b50a0cb1.svg\";","import React from 'react';\n\nimport './style.scss';\n\nfunction Dialog(props) {\n  return (\n    <div className={[\"dialog__container\", props.position ? props.position : \"\"].join(' ')} style={{backgroundImage: 'url(./logo192.png)'}}>\n      <div className=\"dialog__div\">\n        {props.children}\n      </div>\n    </div>\n  )\n}\n\nexport default Dialog;","import React from 'react';\nimport './style.scss';\nimport { Link } from 'react-router-dom';\n\nclass Countdown extends React.Component {\n\n  constructor(props) {\n    super();\n    let t = props.time - new Date();\n    this.state = {\n      d: Math.floor(t / 60 / 60 / 24 / 1000),\n      h: Math.floor(t / 1000/ 60 / 60 % 24),\n      m: Math.floor(t / 1000/ 60 % 60),\n      s: Math.floor(t / 1000 % 60),\n      start: t < 0\n    };\n  }\n\n  componentDidMount() {\n    this.props.playAudio('BGM');\n    this.interval = window.setInterval(() => {\n      let t = this.props.time - new Date();\n      this.setState({\n        d: Math.floor(t / 60 / 60 / 24 / 1000),\n        h: Math.floor(t / 1000/ 60 / 60 % 24),\n        m: Math.floor(t / 1000/ 60 % 60),\n        s: Math.floor(t / 1000 % 60),\n        start: t < 0\n      });\n      if(t < 0) {\n        window.clearInterval(this.interval);\n      }\n    }, 1000);\n  }\n\n  componentWillUnmount() {\n    window.clearInterval(this.interval);\n  }\n\n  render() {\n    const { d, h, m, s, start } = this.state;\n    const { initialScene } = this.props;\n    return (<div className=\"countdown__container\">\n      { !start && (<div className=\"countdown__layout\">\n        <h3>活動倒數</h3>\n        <div className=\"countdown__timer\">\n          <span className=\"countdown__field\">{d}</span>天\n          <span className=\"countdown__field\">{h}</span>時\n          <span className=\"countdown__field\">{m}</span>分\n          <span className=\"countdown__field\">{s}</span>秒\n        </div>\n      </div>) }\n      { start && (<div className=\"countdown__layout\">\n        <Link to={\"/start/\" + initialScene}>準備啟程出發</Link>\n        </div>)}\n    </div>);\n  }\n}\n\nexport default Countdown;","import React, { useState } from 'react';\nimport './style.scss';\nimport nextSvg from '../svg/next.svg';\n\nfunction Tutorial() {\n\n  let [step, setStep] = useState(1);\n\n  return (<React.Fragment>\n    <div style={{display: (step!==7 ? 'flex': 'none')}} className=\"tutorial__container\">\n      {step===1 && <React.Fragment>\n        <div className=\"tutorial__content\">\n          <h1>歡迎收聽<br/>復興之聲</h1>\n          <h2>體驗旅程行前說明</h2>\n        </div>\n        <div className=\"tutorial__button\"><span><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n      </React.Fragment>}\n      {step===2 && <React.Fragment>\n        <div className=\"tutorial__content\">\n          <h2>行前注意事項一</h2>\n          <p>為了擁有最好的體驗品質,<br/>全程一定要戴耳機。</p>\n          <p>關掉所有社群通知,請開啟「勿擾模式」。</p>\n        </div>\n        <div className=\"tutorial__button\"><span><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n      </React.Fragment>}\n      {step===3 && <React.Fragment>\n        <div className=\"tutorial__content\">\n          <h2>行前注意事項二</h2>\n          <p>螢幕休眠自動鎖定要取消（避免螢幕關掉，體驗過程被中斷）。</p>\n        </div>\n        <div className=\"tutorial__button\"><span><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n      </React.Fragment>}\n      {step===4 && <React.Fragment>\n        <div className=\"tutorial__content\">\n          <h2>行前注意事項三</h2>\n          <p>外出前請留意電子用品是否充電完成。活動當天點開 Web App 即可開始體驗。</p>\n        </div>\n        <div className=\"tutorial__button\"><span><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n      </React.Fragment>}\n      {step===5 && <React.Fragment>\n        <div className=\"tutorial__content\">\n          <h2>行前注意事項四</h2>\n          <p>這是一場透過智慧型手機聲音引導的體驗活動。過程中當你聽到「聲音引導」中的提示，邀請你一起執行「聲音引導」的行動指令。<br/>你是這場行動中重要的事件推動者，你會與其他同學共同經歷許多神秘的事件，記得保持對「聲音引導」中指令的敏感度。</p>\n        </div>\n        <div className=\"tutorial__button\"><span><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n      </React.Fragment>}\n      {step===6 && <React.Fragment>\n        <div className=\"tutorial__content\">\n          <h2>行前注意事項五</h2>\n          <p>體驗活動行進過程請注意安全，留心每一個步伐，不奔跑、不打鬧，讓每一位參與體驗的同學都擁有一個屬於自己的沉浸旅程。<br/>讓我們一起戴著耳機，享受屬於自己的神秘之旅。</p>\n        </div>\n        <div className=\"tutorial__button\"><span><img src={nextSvg} alt=\"next\" onClick={()=>setStep(step+1)}></img></span></div>      \n      </React.Fragment>}\n    </div>\n  </React.Fragment>);\n}\n\nexport default Tutorial;","import React from 'react';\nimport Dialog from '../Dialog';\nimport './style.scss';\nimport Countdown from '../Countdown';\nimport Tutorial from '../Tutorial';\n\nfunction Welcome(props) {\n  const { script, playAudio } = props;\n  let { serviceworker, standalone, ios, android, safari, chrome, onAir, installPrompt } = props.detect;\n  return (\n    <div className=\"welcome__container\">\n    {!standalone && !onAir && !ios && !android && (\n      <Dialog>\n        <h2>歡迎來到安心城市-<br/>復興高中 App</h2>\n        <p>請使用行動裝置打開這個網頁，將會引導您安裝到您的手機之中。</p>\n        <p>使用 iPhone 手機，請用 Safari 瀏覽器打開，或使用 Android 手機時，請用 Chrome 瀏覽器打開。</p>\n      </Dialog>\n    )}\n    {!standalone && !onAir && android && (!chrome || !serviceworker) && (\n      <Dialog>\n        <h2>歡迎來到安心城市-<br/>復興高中 App</h2>\n        <p>使用 Android 手機時，請用 Chrome 瀏覽器打開。將引導您安裝 App 至手機中。</p>\n      </Dialog>\n    )}\n    {!standalone && !onAir && ios && (!safari || !serviceworker) && (\n      <Dialog>\n        <h2>歡迎來到安心城市-<br/>復興高中 App</h2>\n        <p>使用 iPhone 手機時，請用 Safari 瀏覽器打開。將引導您安裝 App 至手機中。</p>\n      </Dialog>\n    )}\n    {!standalone && serviceworker && !onAir && android && chrome && (\n      <React.Fragment>\n      <Dialog>\n        {!installPrompt && (<React.Fragment>\n          <div className=\"loader\">\n            <svg className=\"circular\" viewBox=\"25 25 50 50\">\n              <circle className=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\"/>\n            </svg>\n          </div>\n          <h4>安裝程序準備中，請稍候。<br/>請使用 Google Chrome 打開。</h4>\n          </React.Fragment>)}\n        {installPrompt && (<React.Fragment>\n          <h4>安裝程序準備完成</h4>\n          <h4>點選安裝，<br/>再從主畫面打開App。</h4>\n          </React.Fragment>)}\n      </Dialog>\n      {installPrompt && (\n        <div style={{position: \"relative\", top: '70%'}}><span className=\"button\">安裝 App</span></div>\n        )}\n      </React.Fragment>\n    )}\n    {!standalone && serviceworker && !onAir && ios && safari && (\n      <Dialog position=\"bottom\">\n        請先點選\n          <span style={{display:\"inline-block\", margin: '0 5px'}}><img width=\"14\" style={{verticalAlign:'text-bottom'}} className=\"ico_message_1\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAuBAMAAADNZLQ8AAAAMFBMVEUAAAANeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOoNeOrHWcYsAAAAD3RSTlMA/RB6BWnS7h2ovJI4VC5qdH4TAAAAgElEQVQoz2OAAJbJDCjA6/8GZC7T+v+/kflq////n4LgcuR//m//0wHOb/9v8J/5/xIYl6/+M8N/hvhvClD++f8BQD7r/ySo3fVfGYB8hvu/YfIBYD5vEsx4BjAfAUjhK4EAEv8/CAApGAvBr4fwUfSP8mEBN2j4KACd/50BDQAAMr+eMCY8kqkAAAAASUVORK5CYII=\" alt=\"safari menu button\"/></span>\n        再選擇[加入主畫面]，並點選[新增]，將 App 下載至您的手機中。\n      </Dialog>\n    )}\n    {(standalone || onAir) && (<Tutorial />)}\n      <div className=\"welcome__logo\">\n      </div>\n      {(standalone || onAir) && (<Countdown playAudio={playAudio} time={script.event.startTime} initialScene={script.event.initialScene}></Countdown>)}\n    </div>\n  )\n}\n\nexport default Welcome;","import React from 'react';\nimport './style.scss';\nimport { Link } from 'react-router-dom';\n\nimport charator from './slice_c.svg';\n\nclass Scene extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showAction: false,\n      showQuestion: false,\n      showSkip: false,\n      screen: 0\n    };\n    this.skip = this.skip.bind(this);\n  }\n\n  componentDidMount() {\n    this.change();\n  }\n\n  componentDidUpdate(prevProps) {\n    if(prevProps.match.params.id !== this.props.match.params.id) {\n      this.change();\n    }\n  }\n\n  change() {\n    window.gtag(\"config\", 'UA-180228982-1', { page_path: window.location.pathname + '/scene/' + this.props.match.params.id });\n\n    const scene = this.props.script.scene[this.props.match.params.id];\n    window.clearTimeout(this.timeoutAction);\n    window.clearTimeout(this.timeoutQuestion);\n    window.clearTimeout(this.timeoutSkip);\n    window.clearTimeout(this.timeoutNext);\n    window.clearTimeout(this.timeoutScreen);\n\n    if(scene.autoNext) {\n      if(scene.autoNext.getTime() - (new Date()).getTime() < 0) {\n        this.props.history.push('/scene/' + scene.nextScene);\n        return;\n      } else {\n        this.timeoutNext = window.setTimeout(() => {\n          this.props.history.push('/scene/' + scene.nextScene);\n        }, scene.autoNext.getTime() - (new Date()).getTime());\n      }\n    }\n\n    this.setState({\n      showAction: false,\n      showQuestion: false,\n      showSkip: (scene.startTime.getTime() + scene.actionAppear + 300000 - (new Date()).getTime()) < 0,\n      screen: 0\n    });\n\n    if((scene.startTime.getTime() + scene.actionAppear + 300000 - (new Date()).getTime()) > 0) {\n      this.timeoutSkip = window.setTimeout(() => {\n        this.setState({showSkip: true})\n      },\n      scene.startTime.getTime() + scene.actionAppear + 300000 - (new Date()).getTime());\n    }\n\n    if(scene.action) {\n      this.timeoutAction = window.setTimeout(() => {\n        this.setState({showAction: true});\n      }, scene.actionAppear);\n    }\n\n    if(scene.question) {\n      this.timeoutQuestion = window.setTimeout(() => {\n        this.setState({showQuestion: true});\n      }, scene.question.appear);\n    }\n\n    scene.screen.forEach(element => {\n      if(element.duration) {\n        window.setTimeout(() => {\n          this.setState({screen: (this.state.screen + 1)});\n        }, element.duration - (scene.simultaneous ? (new Date() - scene.startTime) : 0));\n      }\n    });\n\n    this.props.playAudio(this.props.match.params.id);\n  }\n\n  skip() {\n    const scene = this.props.script.scene[this.props.match.params.id];\n    window.clearTimeout(this.timeoutAction);\n    window.clearTimeout(this.timeoutQuestion);\n    window.clearTimeout(this.timeoutSkip);\n    window.clearTimeout(this.timeoutNext);\n    window.clearTimeout(this.timeoutScreen);\n    if(scene.action&& scene.action.length === 1) {\n      this.props.history.push('/scene/' + scene.action[0].nextScene);\n    } else {\n      this.setState({showAction: true, showQuestion: true, showSkip: false});\n    }\n  }\n\n  render() {\n    const scene = this.props.script.scene[this.props.match.params.id];\n    const { showQuestion, showAction, showSkip, screen } = this.state;\n    return (<div className=\"scene__container\">\n      <div className=\"background__container\">\n        {scene.screen.map((el,index) => <div className=\"background__screen\" style={{\n          opacity: (index === screen ? 1 : 0),\n          backgroundImage: `url(${process.env.PUBLIC_URL + '/static/images/' + encodeURIComponent(el.background)})`,\n          backgroundPosition: el.background.match('^FINALE') ? 'center' : 'bottom center'}}>\n        </div>)}\n      </div>\n      <div className=\"screen__container\">\n        <h2 dangerouslySetInnerHTML={{__html: scene.title}}></h2>\n        <h3 dangerouslySetInnerHTML={{__html: scene.subtitle}}></h3>\n        <div className=\"controll__container\">\n          <div style={{flex:1}}>\n            {(showAction || showSkip) && scene.action && <img className=\"charator\" src={charator} alt=\"chatactor\"></img>}\n          </div>\n          <div style={{flex:2}}>\n            {scene.action && showAction && scene.action.map((e) => <Link key={e.nextScene} to={e.nextScene}>{e.buttonName}</Link>)}\n          </div>\n          <div style={{flex:1}}>\n            { showSkip && !showQuestion && !showAction && (scene.action || scene.question) && <span onClick={this.skip} className=\"textButton\">跳過</span> }\n          </div>\n        </div>\n        {scene.question && showQuestion && (<div className=\"question__container\">\n          <div className=\"question__dialog\">{scene.question.title}</div>\n          {scene.question.answer.map((answer) => <Link key={answer.nextScene} to={answer.nextScene}>{answer.buttonName}</Link>)}\n        </div>)}\n      </div>\n    </div>);\n  }\n}\n\nexport default Scene;","const startTime = new Date() > new Date(2020,9,16,14,20,0) ? new Date() : new Date(2020,9,16,14,20,0); // 活動開始時間 手機當地時間 注意月份起時為 0\nconst duration = (h,m,s) => ((h*60+m)*60+s)*1000;\n\nlet script = {\n  event: {\n    name: \"改變的力量x復興高中\",\n    startTime: startTime,\n    initialScene: \"C.START\",\n    waitingSoundFile: \"4、Mer de velours EDIT.m4a\",\n  },\n  scene: {\n    \"C.START\": {\n      startTime: startTime,\n      soundDuration: duration(0,47,28),\n      simultaneous: true,\n      origionalSoundFile: \"F 復興高中 改變的力量 Mix1 1015_3.m4a\",\n      title: \"\",\n      subtitle: \"\",\n      screen: [\n        {\n          background: \"A1.Q_內容1.png\",\n          duration: duration(0, 47, 16)\n        },\n        {\n          background: \"FINALE_內容3.png\"\n        }\n      ],\n      question: null,\n      actionAppear: null,\n      action: null,\n    },\n  }\n};\n\nexport default script;\n","import React from 'react';\n\nimport './style.scss';\n\nclass Start extends React.Component {\n\n  constructor() {\n    super();\n    this.state = {\n      size: '100vw'\n    }\n  }\n\n  componentDidMount() {\n    const {id} = this.props.match.params;\n\n    window.gtag(\"config\", 'UA-180228982-1', { page_path: window.location.pathname +'/start/' + id });\n\n    this.props.stopAudio();\n\n    window.setTimeout(() => {\n      this.setState({size: '500vw'});\n    }, 2000);\n    window.setTimeout(() => {\n      this.props.history.push('/scene/' + id);\n    }, 4000);\n  }\n\n  render() {\n    return (\n      <div className=\"start__container\" style={{backgroundSize: this.state.size}}>\n      </div>\n    )\n  }\n}\n\nexport default Start;","import React from 'react';\nimport './App.scss';\nimport {\n  Switch,\n  Route\n} from 'react-router-dom';\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\nimport { withRouter } from \"react-router\";\n\nimport Welcome from './components/Welcome';\nimport Scene from './components/Scene';\nimport script from './script';\nimport Start from './components/Start';\n\nclass App extends React.Component {\n\n  constructor() {\n    super();\n    \n    let useragent = navigator.userAgent;\n    let rules = ['WebView','(iPhone|iPod|iPad)(?!.*Safari/)','Android.*(wv|.0.0.0)'];\n    let webviewRegex = new RegExp(`(${rules.join('|')})`, 'ig');\n    let serviceworker = window.hasOwnProperty('ServiceWorker');\n    if(serviceworker) {\n      if(serviceworker && navigator.serviceWorker.controller) {\n        serviceworker = navigator.serviceWorker.controller.state;\n      }\n    }\n\n    this.audio = {};\n\n    this.state = {\n      detect: {\n        serviceworker: serviceworker,\n        standalone: window.matchMedia('(display-mode: standalone)').matches || navigator.hasOwnProperty('standalone'),\n        ios: (new RegExp('(iPhone|iPod|iPad)')).test(useragent),\n        android: (new RegExp('Android')).test(useragent),\n        chrome: (navigator.userAgent.indexOf(\"Chrome/\") !== -1),\n        safari: (navigator.userAgent.indexOf(\"Safari/\") !== -1 && navigator.userAgent.indexOf(\"Chrome/\") === -1),\n        webview: webviewRegex.test(useragent),\n        onAir: ( new Date().getTime() - script.event.startTime.getTime() ) > 0,\n        installPrompt: false\n      }\n    };\n\n    this.playAudio = this.playAudio.bind(this);\n    this.stopAudio = this.stopAudio.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('touchstart', () => {\n      if(this.state.detect.onAir || this.state.detect.standalone) {\n        let playPromise = this.audio.play();\n        if (playPromise !== undefined) {\n          playPromise\n            .then(_ => {\n            })\n            .catch(error => {\n            });\n        }\n      }\n    });\n\n    document.addEventListener('visibilitychange', () => {\n      if(this.state.detect.onAir || this.state.detect.standalone) {\n        let playPromise = this.audio.play();\n        if (playPromise !== undefined) {\n          playPromise\n            .then(_ => {\n            })\n            .catch(error => {\n            });\n        }\n      }\n    });\n\n    this.audio.addEventListener('ended', () => {\n      this.audio.src=\"\";\n    });\n\n    if(!this.state.detect.onAir) {\n      window.addEventListener('beforeinstallprompt', (e) => {\n        e.preventDefault();\n        this.installPromptEvent = e\n        if (this.installPromptEvent.prompt) {\n          document.querySelector('#root').addEventListener('click', this.addToHomeScreen, {\n            once: true\n          });\n        }\n\n        let detect = { ...this.state.detect };\n        detect.installPrompt = true;\n        this.setState({detect: detect});\n        \n      });\n    }\n\n    if(!this.state.detect.onAir) {\n      window.setTimeout(() => {\n        let detect = { ...this.state.detect };\n        detect.onAir = true;\n        this.setState({detect: detect});\n      }, script.event.startTime.getTime() - new Date().getTime());\n    }\n  }\n\n  addToHomeScreen = (e) => {\n    if (this.installPromptEvent && !this.state.detect.onAir) {\n      this.installPromptEvent.prompt();\n      this.installPromptEvent.userChoice.then((choice) => {\n        if (choice.outcome === 'accepted') {\n        } else {\n        }\n        this.installPromptEvent = null;\n      });\n    }\n  }\n\n  playAudio = (id) => {\n    if(id !== 'BGM') document.getElementById('audioEl').loop = false;\n    let url = `${process.env.PUBLIC_URL}/static/media/${id}.m4a`;\n    let request = new XMLHttpRequest();\n    request.open('GET', encodeURI(url), true);\n    request.setRequestHeader('Content-Type', 'application/json');\n    request.responseType = 'blob';\n    request.onload = () => {\n      var objectUrl = URL.createObjectURL(new Blob([request.response], {type: 'audio/mp4'}));\n      this.audio.src = objectUrl;\n      this.audio.onload = () => {\n        URL.revokeObjectURL(objectUrl);\n      };\n      if(script.scene[id] && script.scene[id].simultaneous) {\n        this.audio.addEventListener('canplay', () => {\n          this.audio.currentTime = ((new Date()).getTime() - script.scene[id].startTime.getTime()) / 1000;\n        }, {once: true});\n\n        window.setInterval(() => {\n          if(Math.abs(this.audio.currentTime - ((new Date()).getTime() - script.scene[id].startTime.getTime()) / 1000) > 1) {\n            this.audio.currentTime = ((new Date()).getTime() - script.scene[id].startTime.getTime()) / 1000;\n          }\n        }, 1000);\n      }\n\n      let playPromise = this.audio.play();\n      if (playPromise !== undefined) {\n        playPromise\n          .then(_ => {\n          })\n          .catch(error => {\n          });\n      }\n    };\n    request.send();\n  }\n\n  stopAudio = () => {\n    document.getElementById('audioEl').pause();\n  }\n\n  render() {\n    const { detect } = this.state;\n    const { location } = this.props;\n    return (\n      <div className=\"App\">\n        <div className=\"console\" style={{height: \"auto\"}} id=\"log\" ref={(element) => { this.log = element; }}></div>\n          <TransitionGroup childFactory={child => React.cloneElement(child)}>\n            <CSSTransition\n              key={location.key}\n              classNames='fade'\n              timeout={2000}\n            >\n              <Switch location={location}>\n                <Route exact path=\"/\">\n                  <Welcome detect={detect} script={script} playAudio={this.playAudio} />\n                </Route>\n                <Route path=\"/start/:id\" render={routeProps => (<Start {...routeProps} stopAudio={this.stopAudio} script={script}></Start>)} />\n                <Route path=\"/scene/:id\" render={routeProps => (<Scene {...routeProps} playAudio={this.playAudio} script={script}></Scene>)} />\n              </Switch>\n            </CSSTransition>\n          </TransitionGroup>\n        <audio crossOrigin=\"anonymous\" loop={true} autoPlay={false} ref={(element) => { this.audio = element; }} id=\"audioEl\" />\n    </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        console.log('Is not localhost. Just register service worker');\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        console.log('installing');\n        if (installingWorker == null) {\n          console.log('can not install');\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          console.log(installingWorker.state);\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { MemoryRouter, BrowserRouter } from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst Router = (process.env.NODE_ENV === 'production') ? MemoryRouter : BrowserRouter;\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router basename={ process.env.PUBLIC_URL }>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorker.register();\n"],"sourceRoot":""}